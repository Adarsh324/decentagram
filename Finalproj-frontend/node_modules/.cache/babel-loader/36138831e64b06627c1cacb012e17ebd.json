{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\react\\\\finalProj\\\\Finalproj-frontend\\\\src\\\\pages\\\\testChat\\\\testChat.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./testChat.css\";\nimport { useContext, useState, useEffect } from \"react\";\nimport { testContext } from \"../../context/testContext\";\nimport Web3 from 'web3';\nimport { chatcontractAddress, chatcontractABI } from \"../chat/chatConstants\";\nimport React from \"react\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TestChat() {\n  _s();\n\n  const [msg, setmsg] = useState();\n  const [addr, setaddr] = useState();\n  const [acs, setacs] = useState([[], {}]);\n  let web3 = new Web3(window.ethereum);\n  let chatcontract = new web3.eth.Contract(chatcontractABI, chatcontractAddress);\n  let {\n    connectedAccount\n  } = useContext(testContext);\n  var accounts = [];\n  var myMap = {};\n  var msgs = {};\n  useEffect(() => {\n    chatcontract.getPastEvents('message', {\n      fromBlock: 0,\n      toBlock: 'latest'\n    }, function (err, data) {\n      // console.log(data);\n      let x = data.length;\n\n      for (var n = 0; n < x; n++) {\n        if (data[n].returnValues.from.toLowerCase() === connectedAccount) {\n          if (!myMap[data[n].returnValues.to]) {\n            myMap[data[n].returnValues.to] = true;\n            accounts.push(data[n].returnValues.to);\n            msgs[data[n].returnValues.to] = [[]];\n          }\n\n          msgs[data[n].returnValues.to].push([data[n].returnValues.message, \"snd\"]);\n        }\n\n        if (data[n].returnValues.to.toLowerCase() === connectedAccount) {\n          if (!myMap[data[n].returnValues.from]) {\n            myMap[data[n].returnValues.from] = true;\n            accounts.push(data[n].returnValues.from);\n            msgs[data[n].returnValues.from] = [[]];\n          }\n\n          msgs[data[n].returnValues.from].push([data[n].returnValues.message, \"rec\"]);\n        }\n      }\n\n      setacs([accounts, msgs]);\n    });\n  }, [connectedAccount]);\n\n  function expand() {}\n\n  function sendNewMsg() {\n    var message = msg;\n    var address = addr;\n    alert(address + \":\" + message);\n    var date = new Date().toLocaleDateString(\"IN\");\n    var time = new Date().toLocaleTimeString(\"IN\");\n    time = time.split('.');\n    var accurateTime = date + ' ' + time[0] + ':' + time[1];\n    chatcontract.methods.sendMessage(address, message, accurateTime).send({\n      from: connectedAccount\n    }, function (err, transcationHash) {\n      if (err) {\n        console.log(err);\n      } else {\n        console.log(\"message sent,trnx hash:\" + transcationHash);\n      }\n    });\n  }\n\n  function addMessages(a) {\n    console.log(\"send messhes\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"Current Ac:\", connectedAccount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"address\",\n      id: \"address-send\",\n      onChange: e => setaddr(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 111\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"message\",\n      id: \"msg-send\",\n      onChange: e => setmsg(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 106\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"btn-send\",\n      onClick: sendNewMsg,\n      children: \"send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"rec-msgs\",\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 8\n      }, this), acs[0].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"account\",\n        onClick: () => expand(),\n        children: [item, /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"messages\",\n          children: acs[1][item].map((ms, ii) => /*#__PURE__*/_jsxDEV(\"div\", {\n            class: ms[1],\n            children: ms[0]\n          }, ii, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 27\n        }, this)]\n      }, item, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this)), acs[0].map((ac, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"accordion-item p-3  border-primary bg-dark\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          class: \"accordion-header\",\n          id: \"flush-heading\" + ac,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            id: ac,\n            class: \"accordion-button collapsed\",\n            type: \"button\",\n            onclick: () => addMessages(this),\n            \"data-bs-toggle\": \"collapse\",\n            \"data-bs-target\": \"#flush-collapse\" + ac,\n            \"aria-expanded\": \"false\",\n            \"aria-controls\": \"flush-collapse\" + ac,\n            children: ac\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"flush-collapse\" + ac,\n          class: \"accordion-collapse collapse\",\n          \"aria-labelledby\": \"flush-heading\" + ac,\n          \"data-bs-parent\": \"#accordionFlushExample\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"accordion-body\",\n            id: \"messagepart\" + ac,\n            children: [\"Placeholder content for this accordion, which is intended to demonstrate the \", /*#__PURE__*/_jsxDEV(\"code\", {\n              children: \".accordion-flush\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 140\n            }, this), \" class. This is the first items accordion body.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), \"1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 32\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 12\n  }, this);\n}\n\n_s(TestChat, \"Km/kEXKfIODmQTwWAtzy1G0+txI=\");\n\n_c = TestChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"TestChat\");","map":{"version":3,"sources":["D:/dev/react/finalProj/Finalproj-frontend/src/pages/testChat/testChat.jsx"],"names":["useContext","useState","useEffect","testContext","Web3","chatcontractAddress","chatcontractABI","React","Topbar","TestChat","msg","setmsg","addr","setaddr","acs","setacs","web3","window","ethereum","chatcontract","eth","Contract","connectedAccount","accounts","myMap","msgs","getPastEvents","fromBlock","toBlock","err","data","x","length","n","returnValues","from","toLowerCase","to","push","message","expand","sendNewMsg","address","alert","date","Date","toLocaleDateString","time","toLocaleTimeString","split","accurateTime","methods","sendMessage","send","transcationHash","console","log","addMessages","a","e","target","value","map","item","index","ms","ii","ac","i"],"mappings":"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","sourcesContent":["import \"./testChat.css\";\r\nimport { useContext,useState,useEffect } from \"react\";\r\nimport { testContext } from \"../../context/testContext\";\r\nimport Web3 from 'web3';\r\nimport {chatcontractAddress,chatcontractABI} from \"../chat/chatConstants\";\r\nimport React from \"react\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nexport default function TestChat() {\r\n    const [msg, setmsg] = useState();\r\n    const [addr, setaddr] = useState();\r\n    const [acs, setacs] = useState([[],{}]);\r\n    \r\n  \r\n    \r\n    \r\n    \r\n    let web3 = new Web3(window.ethereum)\r\n    let chatcontract = new web3.eth.Contract(chatcontractABI, chatcontractAddress);\r\n       let {\r\n        connectedAccount\r\n      } =  useContext(testContext);\r\n    var accounts=[]; \r\n    var myMap={};\r\n    \r\n    var msgs={};\r\n    useEffect(() => {\r\n         chatcontract.getPastEvents('message', {\r\n            fromBlock: 0,\r\n            toBlock: 'latest',\r\n    \r\n          },function (err, data) {\r\n            // console.log(data);\r\n            let x = data.length;\r\n            for (var n = 0; n < x; n++) {\r\n               \r\n                if(data[n].returnValues.from.toLowerCase()===connectedAccount){\r\n                  if(!myMap[data[n].returnValues.to]){\r\n                    myMap[data[n].returnValues.to]=true;\r\n               \r\n                    accounts.push(data[n].returnValues.to);\r\n                    \r\n                    msgs[data[n].returnValues.to]=[[]];\r\n                    \r\n                  }\r\n                 \r\n                  msgs[data[n].returnValues.to].push([data[n].returnValues.message,\"snd\"]);\r\n                }\r\n              \r\n                if((data[n].returnValues.to.toLowerCase()===connectedAccount)){\r\n                \r\n                   \r\n              if(!myMap[data[n].returnValues.from]){\r\n                \r\n                myMap[data[n].returnValues.from]=true;\r\n               \r\n                    accounts.push(data[n].returnValues.from);\r\n                   \r\n                    msgs[data[n].returnValues.from]=[[]];\r\n                \r\n                   \r\n                \r\n              }\r\n              \r\n              msgs[data[n].returnValues.from].push([data[n].returnValues.message,\"rec\"]);\r\n            }\r\n            }\r\n    \r\n          \r\n            \r\n            setacs([accounts,msgs]);\r\n           \r\n           \r\n            \r\n           \r\n          });\r\n    }, [connectedAccount]);\r\n\r\n    \r\n    function expand(){\r\n\r\n\r\n    }\r\n\r\n      function sendNewMsg(){\r\n        var message=msg;\r\n        var address=addr;\r\n        alert(address+\":\"+message);\r\n        var date = new Date().toLocaleDateString(\"IN\");\r\n        var time = new Date().toLocaleTimeString(\"IN\");\r\n        time = time.split('.')\r\n        var accurateTime = date + ' ' + time[0] + ':' + time[1];\r\n\r\n        chatcontract.methods.sendMessage(address, message, accurateTime).send({ from: connectedAccount }, function (err, transcationHash) {\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n            else{\r\n                console.log(\"message sent,trnx hash:\"+transcationHash);\r\n            }\r\n        });\r\n      }\r\n      function addMessages(a){\r\n        console.log(\"send messhes\");\r\n      }\r\n\r\n    return(<div>\r\n      <Topbar />\r\n        <h4>Current Ac:{connectedAccount}</h4>\r\n        <input type=\"text\" placeholder=\"address\" id=\"address-send\" onChange={(e) => setaddr(e.target.value)}/><br/>\r\n        <input type=\"text\" placeholder=\"message\" id=\"msg-send\" onChange={(e) => setmsg(e.target.value)}/><br/>\r\n        <div class=\"btn-send\" onClick={sendNewMsg}>send</div>\r\n\r\n        <h2>Messages</h2>\r\n        <div id=\"rec-msgs\">\r\n       \r\n        {/* <ul>\r\n            \r\n           {acs[0].map((item, index) => (\r\n                    <li key={item}  class=\"account\">{item}  :<br/> <ul>\r\n                          \r\n                            {acs[1][item].map((ms, ii) => (\r\n                    <li key={ii}>{ms}</li>\r\n                ))}\r\n\r\n                        </ul></li>\r\n                ))}\r\n        </ul> */}\r\n       <br />\r\n      \r\n            \r\n           {acs[0].map((item, index) => (\r\n                    <div key={item}  class=\"account\" onClick={()=>expand()}>{item}  \r\n                          <div class={\"messages\"}>\r\n                            {acs[1][item].map((ms, ii) => (\r\n                    <div key={ii} class={ms[1]}>{ms[0]}</div>\r\n                ))}</div>\r\n\r\n                       </div>\r\n                ))}\r\n    \r\n          {acs[0].map((ac,i)=>(<div class=\"accordion-item p-3  border-primary bg-dark\">\r\n            <h2 class=\"accordion-header\" id={\"flush-heading\"+ac}>\r\n            <button id={ac}class=\"accordion-button collapsed\" type=\"button\" onclick={()=>addMessages(this)} data-bs-toggle=\"collapse\" data-bs-target={\"#flush-collapse\"+ac} aria-expanded=\"false\" aria-controls={\"flush-collapse\"+ac }> \r\n            {ac} \r\n            </button>\r\n            </h2>\r\n            <div id={\"flush-collapse\"+ ac} class=\"accordion-collapse collapse\" aria-labelledby={\"flush-heading\"+ac} data-bs-parent=\"#accordionFlushExample\">\r\n            <div class=\"accordion-body\" id={\"messagepart\"+ac}>Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first items accordion body.</div>\r\n            </div>\r\n            1</div>))}\r\n\r\n        \r\n        </div>\r\n    </div>);\r\n}"]},"metadata":{},"sourceType":"module"}