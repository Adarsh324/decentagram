{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\react\\\\finalProj\\\\Finalproj-frontend\\\\src\\\\pages\\\\login\\\\LoginPage.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./login.css\";\nimport SocialNetwork from '../../img/SocialNetwork.png';\nimport { testContext } from \"../../context/testContext\";\nimport AuthValidation from \"../../utils/AuthValidation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginPage() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    connectWallet,\n    connectedAccount,\n    loginData,\n    handleLoginDataChange,\n    getUserAddress,\n    isLoggedIn,\n    setisLoggedIn,\n    setloginData,\n    getUserName,\n    curUserName\n  } = useContext(testContext);\n  useEffect(() => {\n    const handleAccountsChanged = () => {\n      // Reload the page when MetaMask account is changed\n      window.location.reload();\n    }; // Add event listener for MetaMask account change\n\n\n    window.ethereum.on('accountsChanged', handleAccountsChanged); // Clean up the event listener on component unmount\n\n    return () => {\n      window.ethereum.off('accountsChanged', handleAccountsChanged);\n    };\n  }, []);\n\n  const handleLoginFormSubmit = async event => {\n    const {\n      username,\n      password\n    } = loginData;\n    event.preventDefault();\n\n    if (!username) {\n      alert(\"Enter email\");\n      return;\n    }\n\n    if (!password) {\n      alert(\"Enter password\");\n      return;\n    }\n\n    !connectedAccount && connectWallet();\n    let userAddress = getUserAddress();\n\n    if (userAddress === '0x0000000000000000000000000000000000000000') {\n      alert(\"account does not exists\");\n      return;\n    }\n\n    let validated = await AuthValidation(username, connectedAccount, password);\n    setisLoggedIn(validated);\n    console.log(\"validated:\", validated);\n    console.log(\"Username:\", username);\n    console.log(\"islogedin:\", isLoggedIn);\n\n    if (validated) {\n      setloginData({\n        username: \"\",\n        password: \"\"\n      });\n      getUserName();\n      console.log(\"current username:\" + curUserName);\n      navigate('/');\n    } else {\n      alert(\"wrong credentials\");\n    } // navigate('/');\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-row\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vector-art\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"cover-image\",\n        src: SocialNetwork,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 38\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLoginFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"username-box\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Username/Email\",\n            type: \"text\",\n            className: \"username\" // value={username}\n            ,\n            onChange: e => handleLoginDataChange(e, \"username\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password-box\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Password\",\n            type: \"password\",\n            className: \"password\" // value={password}\n            ,\n            onChange: e => handleLoginDataChange(e, \"password\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Sign-In-Button-div\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"Sign-In-Button\",\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toSignup\",\n          children: [\"Do not have an  Account?  \", /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => {\n              navigate('/register');\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"log-in-text\",\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 108\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 61\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 71\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 11\n  }, this);\n}\n\n_s(LoginPage, \"lLyxbGAH/VJ1zp/TUmjK+w8aZQ8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["D:/dev/react/finalProj/Finalproj-frontend/src/pages/login/LoginPage.jsx"],"names":["React","useState","useContext","useEffect","useNavigate","SocialNetwork","testContext","AuthValidation","LoginPage","navigate","connectWallet","connectedAccount","loginData","handleLoginDataChange","getUserAddress","isLoggedIn","setisLoggedIn","setloginData","getUserName","curUserName","handleAccountsChanged","window","location","reload","ethereum","on","off","handleLoginFormSubmit","event","username","password","preventDefault","alert","userAddress","validated","console","log","e"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport React, { useState, useContext,useEffect} from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./login.css\"\r\nimport SocialNetwork from '../../img/SocialNetwork.png';\r\nimport { testContext } from \"../../context/testContext\";\r\nimport AuthValidation from \"../../utils/AuthValidation\";\r\nfunction LoginPage() {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  \r\n  const {\r\n    connectWallet,\r\n    connectedAccount,\r\n    loginData,\r\n    handleLoginDataChange,\r\n    getUserAddress,\r\n    isLoggedIn,\r\n    setisLoggedIn,\r\n    setloginData,\r\n    getUserName,\r\n    curUserName\r\n  } =  useContext(testContext);\r\n \r\n  useEffect(() => {\r\n    const handleAccountsChanged = () => {\r\n      // Reload the page when MetaMask account is changed\r\n      window.location.reload();\r\n    };\r\n\r\n    // Add event listener for MetaMask account change\r\n    window.ethereum.on('accountsChanged', handleAccountsChanged);\r\n\r\n    // Clean up the event listener on component unmount\r\n    return () => {\r\n      window.ethereum.off('accountsChanged', handleAccountsChanged);\r\n    };\r\n  }, []);\r\n  const handleLoginFormSubmit = async(event) => {\r\n    const {username,password}=loginData;\r\n     event.preventDefault();\r\n     if(!username){alert(\"Enter email\");return;}\r\n     if(!password){alert(\"Enter password\");return;}\r\n     !connectedAccount&&connectWallet();\r\n     let userAddress=getUserAddress();\r\n     if (userAddress === '0x0000000000000000000000000000000000000000') {\r\n      alert(\"account does not exists\");\r\n      return;\r\n     }\r\n     let validated = await AuthValidation(username,connectedAccount,password);\r\n     setisLoggedIn(validated);\r\n    \r\n    console.log(\"validated:\", validated);\r\n    console.log(\"Username:\", username);\r\n    console.log(\"islogedin:\", isLoggedIn);\r\n    if(validated){\r\n      setloginData({username:\"\",password:\"\"});\r\n      getUserName();\r\n    console.log(\"current username:\"+curUserName);\r\n      navigate('/');\r\n\r\n    }\r\n    else{\r\n      alert(\"wrong credentials\");\r\n    }\r\n\r\n    // navigate('/');\r\n  };\r\n\r\n  return (<div className=\"login-row\"><div className=\"vector-art\">\r\n    <img className=\"cover-image\" src={SocialNetwork} alt=\"\" /> </div> <div className=\"login-form\">\r\n\r\n\r\n      <form onSubmit={handleLoginFormSubmit}>\r\n        <div className=\"username-box\">\r\n          {/* <label htmlFor=\"username\">Username:</label> */}\r\n          <input\r\n            placeholder=\"Username/Email\"\r\n            type=\"text\"\r\n            className=\"username\"\r\n            // value={username}\r\n            onChange={(e) => handleLoginDataChange(e, \"username\")}\r\n          />\r\n        </div>\r\n        <div className=\"password-box\">\r\n          {/* <label htmlFor=\"password\">Password:</label> */}\r\n          <input\r\n            placeholder=\"Password\"\r\n            type=\"password\"\r\n            className=\"password\"\r\n            // value={password}\r\n            onChange={(e) => handleLoginDataChange(e, \"password\")}\r\n          />\r\n        </div>\r\n        <div className=\"Sign-In-Button-div\"><button type=\"submit\" className=\"Sign-In-Button\" >Sign In</button></div>\r\n        <div className=\"toSignup\">Do not have an  Account?  <div onClick={() => { navigate('/register') }}><span className=\"log-in-text\">Sign Up</span></div></div>\r\n      </form>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  );\r\n}\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}