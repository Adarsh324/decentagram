{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\react\\\\finalProj\\\\Finalproj-frontend\\\\src\\\\pages\\\\testChat\\\\chatWindow.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { chatcontractAddress, chatcontractABI } from \"../chat/chatConstants\";\nimport \"./chatWindow.css\";\nimport { testContext } from \"../../context/testContext\";\nimport Web3 from 'web3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatWindow(props) {\n  _s();\n\n  const {\n    addr\n  } = props;\n  const [msg, setmsg] = useState();\n  let web3 = new Web3(window.ethereum);\n  let chatcontract = new web3.eth.Contract(chatcontractABI, chatcontractAddress);\n  let {\n    connectedAccount\n  } = useContext(testContext);\n\n  function sendMessage() {\n    var message = msg;\n    var address = addr;\n    var date = new Date().toLocaleDateString(\"IN\");\n    var time = new Date().toLocaleTimeString(\"IN\");\n    time = time.split('.');\n    var accurateTime = date + ' ' + time[0] + ':' + time[1];\n    chatcontract.methods.sendMessage(address, message, accurateTime).send({\n      from: connectedAccount\n    }, function (err, transcationHash) {\n      if (err) {\n        console.log(err);\n      } else {\n        console.log(\"message sent,trnx hash:\" + transcationHash);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      height: '100%'\n    },\n    children: [addr, /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"messages\",\n      children: [\"hi  \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 19\n      }, this), \"hii\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        class: \"msg-send-box\",\n        onChange: e => setmsg(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"msg-send-btn\",\n        onClick: () => sendMessage(),\n        children: \" Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 12\n  }, this);\n}\n\n_s(ChatWindow, \"eQ2rPWrooG8u069+a5sU1Ajw3Hc=\");\n\n_c = ChatWindow;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"sources":["D:/dev/react/finalProj/Finalproj-frontend/src/pages/testChat/chatWindow.jsx"],"names":["useState","useContext","chatcontractAddress","chatcontractABI","testContext","Web3","ChatWindow","props","addr","msg","setmsg","web3","window","ethereum","chatcontract","eth","Contract","connectedAccount","sendMessage","message","address","date","Date","toLocaleDateString","time","toLocaleTimeString","split","accurateTime","methods","send","from","err","transcationHash","console","log","display","flexDirection","justifyContent","height","e","target","value"],"mappings":";;;AAAA,SAAQA,QAAR,EAAiBC,UAAjB,QAAkC,OAAlC;AACA,SAAQC,mBAAR,EAA4BC,eAA5B,QAAkD,uBAAlD;AACA,OAAO,kBAAP;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,IAAP,MAAiB,MAAjB;;AACA,eAAe,SAASC,UAAT,CAAoBC,KAApB,EAA0B;AAAA;;AACrC,QAAM;AAAEC,IAAAA;AAAF,MAAWD,KAAjB;AACF,QAAM,CAACE,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,EAA9B;AAEA,MAAIW,IAAI,GAAG,IAAIN,IAAJ,CAASO,MAAM,CAACC,QAAhB,CAAX;AACA,MAAIC,YAAY,GAAG,IAAIH,IAAI,CAACI,GAAL,CAASC,QAAb,CAAsBb,eAAtB,EAAuCD,mBAAvC,CAAnB;AACG,MAAI;AACHe,IAAAA;AADG,MAEAhB,UAAU,CAACG,WAAD,CAFd;;AAKH,WAASc,WAAT,GAAsB;AACpB,QAAIC,OAAO,GAACV,GAAZ;AACA,QAAIW,OAAO,GAACZ,IAAZ;AACA,QAAIa,IAAI,GAAG,IAAIC,IAAJ,GAAWC,kBAAX,CAA8B,IAA9B,CAAX;AACA,QAAIC,IAAI,GAAG,IAAIF,IAAJ,GAAWG,kBAAX,CAA8B,IAA9B,CAAX;AACAD,IAAAA,IAAI,GAAGA,IAAI,CAACE,KAAL,CAAW,GAAX,CAAP;AACA,QAAIC,YAAY,GAAGN,IAAI,GAAG,GAAP,GAAaG,IAAI,CAAC,CAAD,CAAjB,GAAuB,GAAvB,GAA6BA,IAAI,CAAC,CAAD,CAApD;AAEAV,IAAAA,YAAY,CAACc,OAAb,CAAqBV,WAArB,CAAiCE,OAAjC,EAA0CD,OAA1C,EAAmDQ,YAAnD,EAAiEE,IAAjE,CAAsE;AAAEC,MAAAA,IAAI,EAAEb;AAAR,KAAtE,EAAkG,UAAUc,GAAV,EAAeC,eAAf,EAAgC;AAC9H,UAAID,GAAJ,EAAS;AACLE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH,OAFD,MAGI;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAA0BF,eAAtC;AACH;AACJ,KAPD;AAQD;;AAGC,sBAAO;AAAK,IAAA,KAAK,EAAE;AAAEG,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,aAAa,EAAE,QAAlC;AAA4CC,MAAAA,cAAc,EAAE,eAA5D;AAA6EC,MAAAA,MAAM,EAAE;AAArF,KAAZ;AAAA,eAEU9B,IAFV,eAGH;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA,sCACU;AAAA;AAAA;AAAA;AAAA,cADV;AAAA;AAAA;AAAA;AAAA;AAAA,YAHG,eAQH;AAAK,MAAA,KAAK,EAAE;AAAC2B,QAAAA,OAAO,EAAC;AAAT,OAAZ;AAAA,8BACA;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAC,cAAzB;AAAwC,QAAA,QAAQ,EAAGI,CAAD,IAAK7B,MAAM,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV;AAA7D;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAK,QAAA,KAAK,EAAC,cAAX;AAA0B,QAAA,OAAO,EAAE,MAAIvB,WAAW,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YARG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAcH;;GA5CuBZ,U;;KAAAA,U","sourcesContent":["import {useState,useContext} from \"react\";\r\nimport {chatcontractAddress,chatcontractABI} from \"../chat/chatConstants\";\r\nimport \"./chatWindow.css\"\r\nimport { testContext } from \"../../context/testContext\";\r\nimport Web3 from 'web3';\r\nexport default function ChatWindow(props){\r\n    const { addr } = props;\r\n  const [msg, setmsg] = useState();\r\n  \r\n  let web3 = new Web3(window.ethereum)\r\n  let chatcontract = new web3.eth.Contract(chatcontractABI, chatcontractAddress);\r\n     let {\r\n      connectedAccount\r\n    } =  useContext(testContext);\r\n\r\n  \r\n  function sendMessage(){\r\n    var message=msg;\r\n    var address=addr;\r\n    var date = new Date().toLocaleDateString(\"IN\");\r\n    var time = new Date().toLocaleTimeString(\"IN\");\r\n    time = time.split('.')\r\n    var accurateTime = date + ' ' + time[0] + ':' + time[1];\r\n\r\n    chatcontract.methods.sendMessage(address, message, accurateTime).send({ from: connectedAccount }, function (err, transcationHash) {\r\n        if (err) {\r\n            console.log(err);\r\n        }\r\n        else{\r\n            console.log(\"message sent,trnx hash:\"+transcationHash);\r\n        }\r\n    });\r\n  }\r\n\r\n\r\n    return(<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'space-between', height: '100%' }}>\r\n  \r\n                    {addr}\r\n        <div class=\"messages\">\r\n              hi  <br />hii\r\n        </div>\r\n\r\n\r\n        <div style={{display:\"flex\"}}>\r\n        <input type=\"text\" class=\"msg-send-box\" onChange={(e)=>setmsg(e.target.value)}  /> \r\n        <div class=\"msg-send-btn\" onClick={()=>sendMessage()}> Send</div> \r\n        </div>\r\n             \r\n    </div>);\r\n}"]},"metadata":{},"sourceType":"module"}